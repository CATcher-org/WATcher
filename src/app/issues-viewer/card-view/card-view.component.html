<div class="card-column">
  <div class="column-header">
    <mat-card>
      <mat-card-header>
        <div
          mat-card-avatar
          [ngStyle]="{
            background: 'url(' + this.assignee.avatar_url + ')',
            'background-size': '40px'
          }"
        ></div>
        <mat-card-title>{{ this.assignee !== undefined ? this.assignee.login : '' }}</mat-card-title>
        <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Menu">
          <mat-icon>more_horiz</mat-icon>
        </button>
        <mat-menu #menu="matMenu" matSort [matSortDisableClear]="true">
          <button mat-menu-item>
            <span mat-sort-header="id">Sort by ID</span>
          </button>
          <button mat-menu-item>
            <span mat-sort-header="title">Sort by Title</span>
          </button>
        </mat-menu>
      </mat-card-header>
    </mat-card>
  </div>

  <div *ngFor="let issue of this.issues$ | async; index as i">
    <mat-card class="card">
      <a class="no-underline link-grey-dark" (click)="viewIssueInBrowser(issue.id, $event)">
        <mat-card-header>
          <mat-card-title>{{ this.fitTitleText(issue.title) }}</mat-card-title>
          <mat-card-subtitle>{{ this.readableDateFormat(this.issue.githubIssue.updated_at) }}</mat-card-subtitle>
        </mat-card-header>
        <mat-chip-list aria-label="Labels">
          <mat-chip *ngFor="let label of issue.githubIssue.labels" [ngStyle]="{ 'background-color': '#' + label.color }" selected>
            {{ label.name }}
          </mat-chip>
        </mat-chip-list>
        <mat-divider inset></mat-divider>
        <mat-card-content>{{ this.fitDescriptionText(issue.description) }}</mat-card-content>
        <mat-divider inset></mat-divider>
      </a>
      <mat-card-actions>
        <mat-chip-list aria-label="Assignees">
          <mat-chip *ngFor="let assignee of issue.githubIssue.assignees">
            {{ assignee.login }}
          </mat-chip>
        </mat-chip-list>
        <button mat-button class="action-buttons" (click)="openDeleteDialog(issue.id, $event)">
          <mat-icon>close</mat-icon>
        </button>
      </mat-card-actions>
      <mat-card-footer [style.background-color]="this.isIssueOpen(issue) ? 'green' : 'red'"> </mat-card-footer>
    </mat-card>
  </div>

  <mat-card *ngIf="this.issues.isLoading$ | async" style="display: flex; justify-content: center; align-items: center">
    <mat-progress-spinner color="primary" mode="indeterminate" diameter="50" strokeWidth="5"></mat-progress-spinner>
  </mat-card>
  <mat-paginator [pageSize]="20" [pageSizeOptions]="[10, 20, 50]"></mat-paginator>
</div>
